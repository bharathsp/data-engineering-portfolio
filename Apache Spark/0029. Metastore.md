## **1️⃣ What is a Metastore in Spark / Databricks?**

A **metastore** is a **centralized metadata repository** that stores information *about* your data, not the actual data itself.
Think of it like a **library catalog** — the catalog doesn’t store the books, it just stores where the books are, their author, genre, etc.

In Spark/Databricks (using Hive Metastore or Unity Catalog):

* Stores **database names**
* Stores **table/column names and data types**
* Stores **table location in storage (e.g., ADLS, S3)**
* Stores **partition information**
* Stores **table properties (format, owner, created date, etc.)**

📌 Without a metastore, Spark would have to scan your storage every time you want to find a table’s schema or location — slow and inefficient.

---

## **2️⃣ How Azure Synapse stores metadata**

In **Azure Synapse Analytics**, metadata storage depends on the type of workspace:

### **a. Serverless SQL pool / Dedicated SQL pool**

* Metadata is stored in **Azure SQL-based system tables** inside Synapse.
* Examples:

  * `sys.tables`, `sys.columns` for table structure
  * `sys.schemas`, `sys.databases` for database structure
* This metadata includes table names, schema, column definitions, indexes, statistics, etc.
* It’s **fully managed** by Azure; you don’t manually manage the metastore.

### **b. Synapse + Spark pool**

* Synapse Spark uses an **internal Hive Metastore** (by default).
* This metastore can be:

  * **Embedded** (local to Spark cluster, resets if cluster stops — for dev/testing)
  * **External** (shared metastore like Azure SQL DB or Azure Databricks Unity Catalog for persistence across sessions)
* When you create a Spark table in Synapse:

  * Metadata goes into the Hive Metastore
  * Actual data goes into the storage (e.g., ADLS Gen2)

---

### **3️⃣ Quick visual with icons**

```
[ Your Data in ADLS/S3 ]
        ⬆️
   [ Metastore / Catalog ]
   ┌────────────────────┐
   | Table name         |
   | Columns & types    |
   | File format        |
   | Location           |
   └────────────────────┘
        ⬆️
  [ Spark / Synapse SQL ]
```

---

✅ **In short:**

* **Metastore** = metadata catalog for your tables/databases.
* **Synapse SQL pools** store metadata in **system tables** inside Azure SQL-based engine.
* **Synapse Spark pools** store metadata in a **Hive Metastore** (local or external).

---
