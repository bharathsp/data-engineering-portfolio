## ğŸ›  **What is `@pytest.fixture`?**

In pytest, a **fixture** is a **special function** that **prepares something** your test needs **before** the test runs (and can clean up after).

You mark a function as a fixture with **`@pytest.fixture`**, and pytest will **automatically give its return value** to any test that asks for it.

Think of it like a **butler** ğŸ§‘â€ğŸ³ â€” it sets the table before you eat, and may clean up afterward.

---

## ğŸ¯ **Why use fixtures?**

* âœ… **Avoid repetition** â€” donâ€™t set up the same test data in every test.
* âœ… **Keep tests clean** â€” focus on the logic, not setup.
* âœ… **Easily share resources** â€” like database connections, mock objects, configs.
* âœ… **Automatic setup & teardown** â€” do prep before and cleanup after tests.

---

## â³ **When to use it?**

* When **multiple tests** need the same starting data or objects.
* When **setup is complex** (e.g., connect to a database).
* When you want **reusable, clean test code**.

---

## âš™ **How it works (Example)**

```python
import pytest

# Fixture definition
@pytest.fixture
def sample_data():
    print("\nSetting up sample data")
    return {"user": "Bharath", "age": 30}

# Test using the fixture
def test_user_name(sample_data):
    assert sample_data["user"] == "Bharath"

def test_user_age(sample_data):
    assert sample_data["age"] == 30
```

**What happens here?**

1. `@pytest.fixture` tells pytest **this is setup code**.
2. Any test with a `sample_data` argument **automatically gets the fixtureâ€™s return value**.
3. Setup code runs before each test.

---

## ğŸ§¹ **Teardown with Fixtures**

If you need cleanup after the test, use `yield`:

```python
@pytest.fixture
def resource():
    print("Setup resource")
    yield "Resource ready"
    print("Teardown resource")
```

Here:

* Code **before `yield`** runs **before the test**.
* Code **after `yield`** runs **after the test**.

---

## ğŸ“ **Real-Life Analogy**

`@pytest.fixture` is like **a coffee machine in an office** â˜•:

* You **set it up once**
* Everyone (tests) can use it
* You **clean it after** so itâ€™s ready for the next round
