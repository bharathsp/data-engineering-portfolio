## 🛠 **What is `@pytest.fixture`?**

In pytest, a **fixture** is a **special function** that **prepares something** your test needs **before** the test runs (and can clean up after).

You mark a function as a fixture with **`@pytest.fixture`**, and pytest will **automatically give its return value** to any test that asks for it.

Think of it like a **butler** 🧑‍🍳 — it sets the table before you eat, and may clean up afterward.

---

## 🎯 **Why use fixtures?**

* ✅ **Avoid repetition** — don’t set up the same test data in every test.
* ✅ **Keep tests clean** — focus on the logic, not setup.
* ✅ **Easily share resources** — like database connections, mock objects, configs.
* ✅ **Automatic setup & teardown** — do prep before and cleanup after tests.

---

## ⏳ **When to use it?**

* When **multiple tests** need the same starting data or objects.
* When **setup is complex** (e.g., connect to a database).
* When you want **reusable, clean test code**.

---

## ⚙ **How it works (Example)**

```python
import pytest

# Fixture definition
@pytest.fixture
def sample_data():
    print("\nSetting up sample data")
    return {"user": "Bharath", "age": 30}

# Test using the fixture
def test_user_name(sample_data):
    assert sample_data["user"] == "Bharath"

def test_user_age(sample_data):
    assert sample_data["age"] == 30
```

**What happens here?**

1. `@pytest.fixture` tells pytest **this is setup code**.
2. Any test with a `sample_data` argument **automatically gets the fixture’s return value**.
3. Setup code runs before each test.

---

## 🧹 **Teardown with Fixtures**

If you need cleanup after the test, use `yield`:

```python
@pytest.fixture
def resource():
    print("Setup resource")
    yield "Resource ready"
    print("Teardown resource")
```

Here:

* Code **before `yield`** runs **before the test**.
* Code **after `yield`** runs **after the test**.

---

## 📍 **Real-Life Analogy**

`@pytest.fixture` is like **a coffee machine in an office** ☕:

* You **set it up once**
* Everyone (tests) can use it
* You **clean it after** so it’s ready for the next round
