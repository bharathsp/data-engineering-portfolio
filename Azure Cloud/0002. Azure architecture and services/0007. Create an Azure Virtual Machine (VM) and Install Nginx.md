# ğŸ§‘â€ğŸ’» Exercise â€“ Create an Azure Virtual Machine (VM) and Install Nginx

Weâ€™ll use the **Azure CLI in Cloud Shell**.

---

## ğŸ“ Task 1: Create a Resource Group

Resource groups are containers for related resources.

1. ğŸ”‘ Log into the [Azure portal](https://portal.azure.com).
2. ğŸ–¥ Select the **Cloud Shell** icon (top bar).

   * Choose **Bash** if prompted.
3. Run the command:

```bash
az group create --name IntroAzureRG --location eastus
```

âœ… Creates a resource group called **IntroAzureRG** in the **East US** region.

---

## ğŸ“ Task 2: Create a Linux Virtual Machine

Now, create a VM named **my-vm** running Ubuntu 22.04.

Run:

```bash
az vm create \
  --resource-group "IntroAzureRG" \
  --name my-vm \
  --size Standard_D2s_v5 \
  --public-ip-sku Standard \
  --image Ubuntu2204 \
  --admin-username azureuser \
  --generate-ssh-keys
```

### What this does:

* ğŸ“¦ Puts VM inside **IntroAzureRG**
* ğŸ–¥ Creates a VM named **my-vm**
* âš™ Uses **Ubuntu 22.04 image**
* ğŸ‘¤ Sets username = `azureuser`
* ğŸ”‘ Generates SSH keys for secure login
* ğŸŒ Allocates a **Standard public IP**

â³ It takes a few moments â†’ VM is provisioned and ready.

---

## ğŸ“ Task 3: Install Nginx with Custom Script Extension

Weâ€™ll install **Nginx** using the **Custom Script Extension**.

Run:

```bash
az vm extension set \
  --resource-group "IntroAzureRG" \
  --vm-name my-vm \
  --name customScript \
  --publisher Microsoft.Azure.Extensions \
  --version 2.1 \
  --settings '{"fileUris":["https://raw.githubusercontent.com/MicrosoftDocs/mslearn-welcome-to-azure/master/configure-nginx.sh"]}' \
  --protected-settings '{"commandToExecute": "./configure-nginx.sh"}'
```

### What happens:

1. ğŸ“¥ Script is downloaded from GitHub â†’ `configure-nginx.sh`
2. ğŸ”„ Updates package list â†’ `apt-get update`
3. ğŸ“¦ Installs **Nginx web server**
4. ğŸ  Updates `/var/www/html/index.html` to show a **welcome message** with VM hostname

---

## ğŸ‰ Verification

* Copy your VMâ€™s **public IP address** (shown in output of `az vm create`).
* Open browser â†’ `http://<public-ip>`
* You should see:
  ğŸ‘‰ A **Welcome page from Nginx**, with your VMâ€™s hostname.

---

## ğŸ§¹ Clean Up (After Module Completion)

To avoid extra charges, delete the entire resource group:

```bash
az group delete --name IntroAzureRG --yes --no-wait
```

This removes the **VM + all related resources** in one step.

---

# âœ… Summary

* Created **IntroAzureRG** resource group
* Provisioned **Ubuntu Linux VM (my-vm)**
* Installed **Nginx web server** with Custom Script Extension
* Verified with VMâ€™s public IP
