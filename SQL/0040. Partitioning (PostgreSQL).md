# 🌟 1. What is Partitioning?

* Partitioning is **splitting a large table into smaller, manageable pieces (partitions)**.
* Helps **improve query performance**, **maintenance**, and **archiving**.
* Each partition behaves like a **separate table**, but is **logically part of the main table**.

---

# 🔹 2. Types of Partitioning

### 2.1 Horizontal Partitioning

* Splits **rows** across partitions based on a **column value**.
* Each partition has **subset of rows**.
* Example: split Employees table by `DeptID` or `Year`.

**Real-life analogy:** Employees divided into different office branches 🏢

---

### 2.2 Vertical Partitioning

* Splits **columns** across tables.
* Useful when **some columns are rarely queried**.
* Example: put `Name, DeptID` in one table, and `Salary, Benefits` in another.

**Analogy:** Keep frequently used columns on top shelf, rarely used in storage 🗄️

---

# 🔹 3. Horizontal Partitioning Types in PostgreSQL

### 3.1 Range Partitioning

* Partition rows based on **ranges of values**.
* SQL Example:

```sql
-- Create main partitioned table
CREATE TABLE Employees (
    EmpID INT,
    Name TEXT,
    DeptID INT,
    JoinDate DATE
) PARTITION BY RANGE (JoinDate);

-- Create partitions
CREATE TABLE Employees_2023 PARTITION OF Employees
FOR VALUES FROM ('2023-01-01') TO ('2024-01-01');

CREATE TABLE Employees_2024 PARTITION OF Employees
FOR VALUES FROM ('2024-01-01') TO ('2025-01-01');
```

✅ Queries automatically go to the relevant partition → faster.

---

### 3.2 List Partitioning

* Partition rows based on **specific discrete values**.
* SQL Example:

```sql
CREATE TABLE EmployeesList (
    EmpID INT,
    Name TEXT,
    DeptID INT
) PARTITION BY LIST (DeptID);

CREATE TABLE Employees_HR PARTITION OF EmployeesList
FOR VALUES IN (10);

CREATE TABLE Employees_IT PARTITION OF EmployeesList
FOR VALUES IN (20);
```

* Only rows with `DeptID=10` go to `Employees_HR` and so on.

---

### 3.3 Hash Partitioning

* Partition rows using a **hash function** on a column.
* Useful for **evenly distributing data**, when no natural range exists.

```sql
CREATE TABLE EmployeesHash (
    EmpID INT,
    Name TEXT,
    DeptID INT
) PARTITION BY HASH (EmpID);

CREATE TABLE EmployeesHash_0 PARTITION OF EmployeesHash
FOR VALUES WITH (MODULUS 4, REMAINDER 0);

CREATE TABLE EmployeesHash_1 PARTITION OF EmployeesHash
FOR VALUES WITH (MODULUS 4, REMAINDER 1);
```

* Rows are assigned based on `EmpID % 4` → evenly spread across 4 partitions.

---

# 🔹 4. Benefits of Partitioning

* 🚀 **Improved query performance**: Queries scan only relevant partitions
* 🛠️ **Easier maintenance**: Vacuum, backup, or drop individual partitions
* 📊 **Better statistics and indexing**

---

# 🔹 5. When to Use

* Large tables with **millions of rows**
* Tables with **time-based or categorical access patterns**
* OLAP / Data warehousing workloads

---

# 🏡 Real-Life Analogy

* **Range partition** → Organizing library books by year of publication 📚
* **List partition** → Sorting employees by department 🏢
* **Hash partition** → Randomly distributing mail into 4 mailboxes 📬
