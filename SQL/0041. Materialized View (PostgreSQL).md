# 🌟 1. What is a Materialized View?

* A **materialized view** is a **physical copy of the result of a query** stored on disk.
* Unlike a regular view, which executes the query **every time it is accessed**, a materialized view **stores the data** for faster retrieval.
* You can **refresh** it periodically to update the data.

**Analogy:**

* Regular view → A **live news feed 📰**, always up-to-date but slow to fetch
* Materialized view → A **printed newspaper 🗞️**, fast to read, needs refresh to get new news

---

# 🌳 2. Creating a Materialized View

```sql
CREATE MATERIALIZED VIEW emp_summary AS
SELECT DeptID, COUNT(*) AS total_employees, AVG(Salary) AS avg_salary
FROM Employees
GROUP BY DeptID;
```

* Stores **summary data** per department.
* Querying this view is **faster** because aggregation is precomputed.

---

# 🌟 3. Querying a Materialized View

```sql
SELECT * FROM emp_summary;
```

* Reads **precomputed data** instead of scanning the full Employees table.

---

# 🌳 4. Refreshing a Materialized View

```sql
REFRESH MATERIALIZED VIEW emp_summary;
```

* Updates the stored data to reflect **changes in the underlying tables**.

* Can be run **manually** or scheduled via **cron / job scheduler**.

* Optional: **CONCURRENTLY** (available in PostgreSQL 9.4+)

```sql
REFRESH MATERIALIZED VIEW CONCURRENTLY emp_summary;
```

* Allows **queries to continue running while refreshing**
* Requires **unique index** on the materialized view

---

# 🌟 5. Advantages

* 🚀 **Faster queries** for heavy aggregations or joins
* 💾 **Reduced CPU usage** because results are precomputed
* 🛠️ Can be **indexed** like a normal table

---

# 🌟 6. Use Cases

* Reporting dashboards
* Precomputed summaries (e.g., daily sales totals)
* Complex joins/aggregations that don’t change frequently

---

# 🏡 Real-Life Analogy

* Imagine a **restaurant menu 📝**:

  * Regular view → chef prepares fresh every order
  * Materialized view → pre-made dishes ready to serve, refresh daily
