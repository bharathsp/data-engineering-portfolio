# üåü 1. What is **VACUUM**?

* PostgreSQL uses **MVCC (Multi-Version Concurrency Control)** ‚Üí old row versions are kept after updates/deletes.
* **VACUUM** cleans up these **dead tuples** so they don‚Äôt bloat the table.
* Frees space and improves **performance**.

---

# üåü 2. Types of VACUUM

| Command               | What it Does                                                                              |
| --------------------- | ----------------------------------------------------------------------------------------- |
| `VACUUM`              | Cleans up dead rows. **Non-blocking**, minimal impact on other queries.                   |
| `VACUUM FULL`         | **Rewrites the entire table** to reclaim space fully. **Blocks the table** while running. |
| `VACUUM FULL ANALYZE` | Reclaims space **and updates table statistics** used by the query planner.                |

---

# üå≥ Examples

1. **Basic VACUUM**

```sql
VACUUM Employees;
```

* Cleans dead rows in `Employees` table.
* Table remains available for queries.

2. **Full VACUUM**

```sql
VACUUM FULL Employees;
```

* Rewrites the table and index.
* Frees disk space at the cost of **locking the table**.

3. **Full VACUUM + Analyze**

```sql
VACUUM FULL ANALYZE Employees;
```

* Cleans up table **AND collects statistics** for the planner.
* Optimizer can make **better decisions** for queries after this.

---

# üåü 3. Why Use VACUUM + ANALYZE

* PostgreSQL uses **statistics** to generate **query plans**.
* `ANALYZE` updates **row counts, distinct values, and distributions**.
* Frequent **updates, inserts, deletes** ‚Üí stale statistics ‚Üí suboptimal query plans.

---

# üè° Real-Life Analogy

Think of a **library üìö**:

* MVCC = every old version of a book is kept on shelves
* `VACUUM` = remove old editions ‚Üí frees shelf space
* `VACUUM FULL` = reorganize library ‚Üí compact shelves
* `ANALYZE` = update library catalog ‚Üí helps librarian find books faster

---

# ‚ö° Notes / Tips

1. **Autovacuum**: PostgreSQL runs **automatic VACUUM + ANALYZE** in the background.
2. `VACUUM FULL` is heavy ‚Üí use only when **disk bloat is high**.
3. Always run `ANALYZE` after **bulk inserts/updates/deletes** to keep query plans optimal.
