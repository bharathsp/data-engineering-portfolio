# ğŸ“Œ What is a Materialized View in Trino?

* ğŸ“„ **Normal View** â†’ Just a **saved SQL query** (no data stored, always computed when queried).
* ğŸ’¾ **Materialized View (MV)** â†’ A **precomputed & stored result** of a query. Data is persisted in storage (e.g., Hive, Iceberg, Delta Lake), and Trino can refresh it periodically.

ğŸ‘‰ So, instead of recalculating heavy joins/aggregations every time, Trino just reads from the **MV table**.

---

# âš™ï¸ How Materialized Views Work in Trino

1. ğŸ“ You define an MV with a SQL query.
2. ğŸ’¿ Trino stores the computed results in a target schema.
3. ğŸ”„ You can refresh it (manual or scheduled).
4. ğŸš€ Queries using the base tables can automatically **redirect** to MV (query optimization).

---

# âœ… When to Use Materialized Views in Trino

* ğŸ“Š **Expensive Aggregations**

  * Example: Daily sales by region from billions of rows.
  * MV precomputes it â†’ Queries become **10x faster**.

* ğŸ”— **Complex Joins**

  * Example: Joining fact + multiple dimension tables.
  * MV avoids redoing the join each time.

* â± **Frequent Reuse**

  * When the same query or pattern runs repeatedly.

* âš¡ **Performance Boost**

  * For dashboards, BI reports, and queries needing **low latency**.

* ğŸ“‰ **Cost Optimization**

  * Reduces compute cost by avoiding repetitive heavy scans.

---

# ğŸš« When NOT to Use MVs

* ğŸ”„ If data changes very frequently & **real-time freshness** is required.
* ğŸ“‚ If storage cost is a concern (since MV stores data).
* ğŸ” If queries are highly ad-hoc and donâ€™t repeat often.

---

To create a materialized view in Trino, use the `CREATE MATERIALIZED VIEW` statement followed by the desired SQL query defining its content.

```
CREATE MATERIALIZED VIEW view_name AS
SELECT column1, column2
FROM table_name
WHERE conditions;
```
- Use `CREATE OR REPLACE MATERIALIZED VIEW` to update an existing view.
- To populate or refresh the view after creation, use `REFRESH MATERIALIZED VIEW view_name`.
- You can add options like `COMMENT` or `WITH` for connector-specific properties if needed.

---

# ğŸ–¼ï¸ Visual Summary

* ğŸ“„ View = Query definition only (no data stored).
* ğŸ’¾ Materialized View = Precomputed + Stored + Refreshable.
* ğŸš€ Use it when: **Speed + Reuse + Heavy Aggregations** matter.
