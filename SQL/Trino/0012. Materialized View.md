# 📌 What is a Materialized View in Trino?

* 📄 **Normal View** → Just a **saved SQL query** (no data stored, always computed when queried).
* 💾 **Materialized View (MV)** → A **precomputed & stored result** of a query. Data is persisted in storage (e.g., Hive, Iceberg, Delta Lake), and Trino can refresh it periodically.

👉 So, instead of recalculating heavy joins/aggregations every time, Trino just reads from the **MV table**.

---

# ⚙️ How Materialized Views Work in Trino

1. 📝 You define an MV with a SQL query.
2. 💿 Trino stores the computed results in a target schema.
3. 🔄 You can refresh it (manual or scheduled).
4. 🚀 Queries using the base tables can automatically **redirect** to MV (query optimization).

---

# ✅ When to Use Materialized Views in Trino

* 📊 **Expensive Aggregations**

  * Example: Daily sales by region from billions of rows.
  * MV precomputes it → Queries become **10x faster**.

* 🔗 **Complex Joins**

  * Example: Joining fact + multiple dimension tables.
  * MV avoids redoing the join each time.

* ⏱ **Frequent Reuse**

  * When the same query or pattern runs repeatedly.

* ⚡ **Performance Boost**

  * For dashboards, BI reports, and queries needing **low latency**.

* 📉 **Cost Optimization**

  * Reduces compute cost by avoiding repetitive heavy scans.

---

# 🚫 When NOT to Use MVs

* 🔄 If data changes very frequently & **real-time freshness** is required.
* 📂 If storage cost is a concern (since MV stores data).
* 🔍 If queries are highly ad-hoc and don’t repeat often.

---

To create a materialized view in Trino, use the `CREATE MATERIALIZED VIEW` statement followed by the desired SQL query defining its content.

```
CREATE MATERIALIZED VIEW view_name AS
SELECT column1, column2
FROM table_name
WHERE conditions;
```
- Use `CREATE OR REPLACE MATERIALIZED VIEW` to update an existing view.
- To populate or refresh the view after creation, use `REFRESH MATERIALIZED VIEW view_name`.
- You can add options like `COMMENT` or `WITH` for connector-specific properties if needed.

---

# 🖼️ Visual Summary

* 📄 View = Query definition only (no data stored).
* 💾 Materialized View = Precomputed + Stored + Refreshable.
* 🚀 Use it when: **Speed + Reuse + Heavy Aggregations** matter.
