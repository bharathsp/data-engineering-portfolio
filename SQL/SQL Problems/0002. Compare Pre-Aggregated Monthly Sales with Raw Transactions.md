### **Compare Pre-Aggregated Monthly Sales with Raw Transactions**

#### ðŸ§¾ **Table 1: `Sales_Transactions`**

| Sale\_ID | Sale\_Month | Sales\_Amount |
| -------- | ----------- | ------------- |
| 1        | 2024-01     | 1000          |
| 2        | 2024-01     | 500           |
| 3        | 2024-02     | 800           |

---

#### ðŸ§¾ **Table 2: `Monthly_Sales_Report`**

| Sale\_Month | Total\_Sales |
| ----------- | ------------ |
| 2024-01     | 2000         |
| 2024-02     | 800          |

---

### ðŸŽ¯ **Task:**

Find the months where the **actual total sales (from transactions)** does **not match** the **pre-aggregated total sales** from `Monthly_Sales_Report`.

---

### âœ… **SQL Solution:**

```sql
SELECT t.Sale_Month
FROM (
    SELECT Sale_Month, SUM(Sales_Amount) AS actual_total
    FROM Sales_Transactions
    GROUP BY Sale_Month
) t
JOIN Monthly_Sales_Report r
  ON t.Sale_Month = r.Sale_Month
WHERE t.actual_total != r.Total_Sales;
```

---

### ðŸ§¾ **Explanation:**

* We aggregate `Sales_Transactions` to get actual totals.
* Then we compare them against `Monthly_Sales_Report`.
* Any mismatch in totals is selected.

---

### âœ… **Optional Variant (Include Differences):**

```sql
SELECT t.Sale_Month, t.actual_total, r.Total_Sales
FROM (
    SELECT Sale_Month, SUM(Sales_Amount) AS actual_total
    FROM Sales_Transactions
    GROUP BY Sale_Month
) t
JOIN Monthly_Sales_Report r
  ON t.Sale_Month = r.Sale_Month
WHERE t.actual_total != r.Total_Sales;
```

Let me know if you want to include months that are **missing in either table** (full outer join).
