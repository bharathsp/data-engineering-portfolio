## ğŸ›’ Problem: Customers Who Visited Without Transactions

### ğŸ“‹ Tables:

#### ğŸ§¾ `Visits`

| ğŸ”‘ Column Name | ğŸ§® Type |
|----------------|--------|
| `visit_id`     | int    |
| `customer_id`  | int    |

- `visit_id` is the **primary key**.
- This table contains information about the customers who **visited the mall**.

#### ğŸ’³ `Transactions`

| ğŸ”‘ Column Name    | ğŸ§® Type |
|-------------------|--------|
| `transaction_id`  | int    |
| `visit_id`        | int    |
| `amount`          | int    |

- `transaction_id` is the **primary key**.
- This table contains information about **transactions** made during each `visit_id`.

---

### ğŸ¯ Task:

Write a SQL query to **find the customer IDs** who **visited the mall but did not make any transactions**, and the **number of such visits**.

> ğŸ§¾ Return the result sorted in **any order**.

---

### ğŸ“Š Example:

#### ğŸ“¥ Input:

`Visits` table:

| ğŸ†” visit_id | ğŸ‘¤ customer_id |
|-------------|----------------|
| 1           | 23             |
| 2           | 9              |
| 4           | 30             |
| 5           | 54             |
| 6           | 96             |
| 7           | 54             |
| 8           | 54             |

`Transactions` table:

| ğŸ†” transaction_id | ğŸ†” visit_id | ğŸ’° amount |
|-------------------|-------------|------------|
| 2                 | 5           | 310        |
| 3                 | 5           | 300        |
| 9                 | 5           | 200        |
| 12                | 1           | 910        |
| 13                | 2           | 970        |

---

#### ğŸ“¤ Output:

| ğŸ‘¤ customer_id | ğŸš« count_no_trans |
|----------------|-------------------|
| 54             | 2                 |
| 30             | 1                 |
| 96             | 1                 |

---

### ğŸ§  Explanation:

- âœ… Customer **23** visited once and **made a transaction** â†’ âŒ not included.
- âœ… Customer **9** visited once and **made a transaction** â†’ âŒ not included.
- âŒ Customer **30** visited once and **made no transaction** â†’ âœ… included.
- ğŸ”„ Customer **54** visited **3 times**: **2 times with no transactions** â†’ âœ… included with `count = 2`.
- âŒ Customer **96** visited once and **made no transaction** â†’ âœ… included.

---
---

### ğŸ’» Solution SQL Query
```sql
SELECT v.customer_id, COUNT(*) AS count_no_trans
FROM Visits v
LEFT JOIN Transactions t
ON v.visit_id = t.visit_id
WHERE t.transaction_id IS NULL
GROUP BY v.customer_id;
```

---

### âœ… **Explanation**:

1. **`LEFT JOIN`**:
   - Combines each row from `Visits` with matching rows in `Transactions` based on `visit_id`.
   - If no transaction exists for a visit, the `transaction_id` will be `NULL`.

2. **`WHERE t.transaction_id IS NULL`**:
   - Filters out the visits that **did not have a corresponding transaction** (i.e., no spending occurred).

3. **`GROUP BY v.customer_id`**:
   - Groups the filtered results by customer to count how many times **each customer visited without transacting**.

4. **`COUNT(*)`**:
   - Counts how many such no-transaction visits occurred for each customer.

---

### ğŸ§¾ Sample Output Based on Your Input:

| customer_id | count_no_trans |
|-------------|----------------|
| 54          | 2              |
| 30          | 1              |
| 96          | 1              |

Let me know if you'd like the same logic as a **Python/Pandas solution**, or in another SQL dialect like PostgreSQL or BigQuery.
