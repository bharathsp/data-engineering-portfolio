## ğŸ” Subqueries in SQL

A **subquery** is a SQL query nested **inside another query**. It provides intermediate results that are used to **filter, compare, or transform** the main query's output.

---

### ğŸ› ï¸ Syntax Breakdown

```sql
SELECT column1, column2, ...
FROM table_name
WHERE column_name operator (
    SELECT column
    FROM table_name
    WHERE condition
);
```

| ğŸ§© Clause | ğŸ’¡ Description |
|----------|----------------|
| `SELECT` | Chooses columns from the main table |
| `FROM` | Specifies the source table |
| `WHERE` | Applies conditions based on subquery results |
| `Subquery` | A nested query that provides a value or set of values |

âœ… Subqueries can appear in:
- `WHERE` clause
- `FROM` clause
- `SELECT` clause

---

### ğŸ“Š Real-World Example

**ğŸ—‚ Table: Orders**

| OrderID | CustomerID | TotalAmount |
|---------|-------------|-------------|
| 101     | C001        | 250         |
| 102     | C002        | 500         |
| 103     | C001        | 300         |
| 104     | C003        | 700         |
| 105     | C002        | 400         |

**ğŸ” Objective:**  
Get the `OrderID` and `TotalAmount` of **orders placed by the customer who has the highest total spending**.

---

### ğŸ§© Inner Query (Subquery)

Find the `CustomerID` with the highest total amount spent:

```sql
SELECT CustomerID
FROM Orders
GROUP BY CustomerID
ORDER BY SUM(TotalAmount) DESC
LIMIT 1;
```

ğŸ§¾ **Result:** `C002`

---

### ğŸ” Outer Query

Now use that result to fetch relevant orders:

```sql
SELECT OrderID, TotalAmount
FROM Orders
WHERE CustomerID = (
    SELECT CustomerID
    FROM Orders
    GROUP BY CustomerID
    ORDER BY SUM(TotalAmount) DESC
    LIMIT 1
);
```

ğŸŸ¢ **Output:**

| OrderID | TotalAmount |
|---------|-------------|
| 102     | 500         |
| 105     | 400         |

---

### ğŸ’¬ Pro Tips

ğŸ”¹ Use `IN` when subquery returns **multiple values**  
ğŸ”¹ Use `=` when subquery returns **a single value**  
ğŸ”¹ Subqueries in the `FROM` clause are called **inline views or derived tables**
