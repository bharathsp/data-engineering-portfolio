# üìä SQL `Aggregate` Functions with Examples

Aggregate functions perform calculations on a set of rows and return a single summary value. They're especially useful for **data summarization, analysis, and reporting**.

---

## üîÅ Common Aggregate Functions

---

### üßÆ `COUNT()`

* **Description**: Counts the number of rows or non-NULL values.
* **Syntax**: `COUNT(expression)`
* **Example**:

**Sample Table: `orders`**

| order\_id | customer\_id | amount |
| --------- | ------------ | ------ |
| 1         | 101          | 200    |
| 2         | 102          | 350    |
| 3         | 103          | NULL   |

```sql
SELECT COUNT(*) FROM orders;
```

‚úÖ **Output**: `3`

```sql
SELECT COUNT(amount) FROM orders;
```

‚úÖ **Output**: `2` (NULL is excluded)

---

### ‚ûï `SUM()`

* **Description**: Total sum of a numeric column.
* **Syntax**: `SUM(expression)`
* **Example**:

```sql
SELECT SUM(amount) FROM orders;
```

‚úÖ **Output**: `550`

---

### üìâ `AVG()`

* **Description**: Average value of a numeric column.
* **Syntax**: `AVG(expression)`
* **Example**:

```sql
SELECT AVG(amount) FROM orders;
```

‚úÖ **Output**: `275` (`(200+350)/2`)

---

### üîΩ `MIN()`

* **Description**: Finds the smallest value.
* **Syntax**: `MIN(expression)`
* **Example**:

```sql
SELECT MIN(amount) FROM orders;
```

‚úÖ **Output**: `200`

---

### üîº `MAX()`

* **Description**: Finds the largest value.
* **Syntax**: `MAX(expression)`
* **Example**:

```sql
SELECT MAX(amount) FROM orders;
```

‚úÖ **Output**: `350`

---

## üß© Other Useful Aggregate Functions

---

### üîó `GROUP_CONCAT()` *(MySQL)*

**Sample Table: `employees`**

| name    | department |
| ------- | ---------- |
| Alice   | HR         |
| Bob     | HR         |
| Charlie | IT         |

```sql
SELECT department, GROUP_CONCAT(name) AS employee_list
FROM employees
GROUP BY department;
```

‚úÖ **Output**:

| department | employee\_list |
| ---------- | -------------- |
| HR         | Alice,Bob      |
| IT         | Charlie        |

---

### üß± `ARRAY_AGG()` *(PostgreSQL, BigQuery)*

```sql
SELECT ARRAY_AGG(name) FROM employees;
```

‚úÖ **Output**: `{Alice, Bob, Charlie}`

---

### üßµ `STRING_AGG()` *(PostgreSQL)*

```sql
SELECT STRING_AGG(name, ', ') FROM employees;
```

‚úÖ **Output**: `Alice, Bob, Charlie`

---

### üìà `VARIANCE()`

**Sample Table: `tests`**

| student | score |
| ------- | ----- |
| A       | 80    |
| B       | 90    |
| C       | 100   |

```sql
SELECT VARIANCE(score) FROM tests;
```

‚úÖ **Output**: `100` (depending on sample or population formula)

---

### üìâ `STDDEV()`

```sql
SELECT STDDEV(score) FROM tests;
```

‚úÖ **Output**: `10`

---

### ‚èÆÔ∏è `FIRST()` / ‚è≠Ô∏è `LAST()` *(Database-specific like MS Access or using window functions)*

```sql
SELECT department, MIN(name) AS first_employee
FROM employees
GROUP BY department;
```

‚úÖ **Output** (Alphabetical first name per department)

| department | first\_employee |
| ---------- | --------------- |
| HR         | Alice           |
| IT         | Charlie         |

---

### ‚öñÔ∏è `MEDIAN()` *(Not standard in all DBs, but supported in PostgreSQL, Oracle, etc.)*

```sql
SELECT PERCENTILE_CONT(0.5) WITHIN GROUP (ORDER BY salary) AS median_salary
FROM employees;
```

‚úÖ **Output**: Median salary value.

---

### üßÆ `MODE()`

```sql
SELECT MODE() WITHIN GROUP (ORDER BY salary) FROM employees;
```

‚úÖ **Output**: Most frequent salary.

---

## üß† Bonus: Aggregate with `GROUP BY`

```sql
SELECT department, COUNT(*) AS num_employees
FROM employees
GROUP BY department;
```

‚úÖ **Output**:

| department | num\_employees |
| ---------- | -------------- |
| HR         | 2              |
| IT         | 1              |

---

## üìå Summary

Aggregate functions in SQL simplify:

* **Summarizing data** (`SUM`, `AVG`, `MIN`, `MAX`)
* **Counting records** (`COUNT`)
* **Statistical analysis** (`VARIANCE`, `STDDEV`, `MEDIAN`, `MODE`)
* **Text and array manipulations** (`GROUP_CONCAT`, `ARRAY_AGG`, `STRING_AGG`)

Mastering them helps unlock **deep insights** from raw data using just a few lines of SQL.
