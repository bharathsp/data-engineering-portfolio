## üîπ What are Slowly Changing Dimensions (SCD)?

> **SCDs** are dimensions that **change slowly over time**, rather than changing on a regular schedule. These changes must be **tracked** in a data warehouse to support **historical analysis**.

---

## üî∏ **SCD Type 1: Overwrite / No History**

### ‚úÖ **Definition:**

* Updates the existing record by **overwriting** old values with new ones.
* **No history** of the change is preserved.

### ‚úÖ **Use Case:**

* When historical data is **not needed** (e.g., typo corrections, non-critical fields)

### ‚úÖ **Example:**

| Customer\_ID | Name | Country |
| ------------ | ---- | ------- |
| 101          | John | USA     |

If John's country changes from USA to Canada, the record becomes:

| Customer\_ID | Name | Country |
| ------------ | ---- | ------- |
| 101          | John | Canada  |

---

## üî∏ **SCD Type 2: Add Row / Full History**

### ‚úÖ **Definition:**

* **Creates a new row** for each historical change with versioning or effective dates.
* **Preserves full history** of changes.

### ‚úÖ **Use Case:**

* When tracking historical values is **important** (e.g., customer location over time)

### ‚úÖ **Extra Columns Added:**

* `Effective_From_Date`, `Effective_To_Date`, `Is_Current` or `Version_No`

### ‚úÖ **Example:**

| Customer\_ID | Name | Country | Effective\_From | Effective\_To | Is\_Current |
| ------------ | ---- | ------- | --------------- | ------------- | ----------- |
| 101          | John | USA     | 2020-01-01      | 2023-12-31    | N           |
| 101          | John | Canada  | 2024-01-01      | NULL          | Y           |

---

## üî∏ **SCD Type 3: Add Column / Limited History**

### ‚úÖ **Definition:**

* **Stores previous value** in a **new column**, while overwriting the current value.
* **Partial history** is maintained (usually one previous state).

### ‚úÖ **Use Case:**

* When only the **last change** is needed for comparison.

### ‚úÖ **Extra Columns Added:**

* `Current_Country`, `Previous_Country`

### ‚úÖ **Example:**

| Customer\_ID | Name | Current\_Country | Previous\_Country |
| ------------ | ---- | ---------------- | ----------------- |
| 101          | John | Canada           | USA               |

---

## üîπ Comparison Table: SCD Types 1, 2, 3

| Feature              | Type 1                  | Type 2                       | Type 3                        |
| -------------------- | ----------------------- | ---------------------------- | ----------------------------- |
| **History Tracked**  | ‚ùå No                    | ‚úÖ Yes (Full)                 | ‚ö†Ô∏è Yes (Limited ‚Äì 1 version)  |
| **Data Overwritten** | ‚úÖ Yes                   | ‚ùå No                         | ‚úÖ Yes (current)               |
| **New Row Added?**   | ‚ùå No                    | ‚úÖ Yes                        | ‚ùå No                          |
| **Use Case**         | Fix typos, non-critical | Track address/role changes   | Recent promotion, last state  |
| **Extra Fields**     | None                    | Dates, version, current flag | One or more "Previous" fields |

---

## üîß Implementation Tips

* Use **hash comparisons** or **CDC** to detect changes
* Maintain **primary keys + effective dates** for Type 2
* Use **MERGE** or **UPSERT** logic in SQL (e.g., `MERGE INTO` in Snowflake, SQL Server)
* In dbt: implement SCD Type 2 via macros (`dbt_utils.surrogate_key` + snapshot features)
