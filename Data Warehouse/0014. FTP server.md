In **data engineering**, an **FTP server** is basically a **file storage and transfer system** that uses the **File Transfer Protocol (FTP)** to let you **upload, download, and manage files** between systems over a network (often the internet).

---

### **FTP Server in Simple Terms** 📦📤📥

* Imagine it as a **remote folder** on another computer (server) that you can connect to and exchange files with.
* You connect to it using an **FTP client** (like FileZilla, WinSCP, or programmatically via Python, Java, etc.).
* It’s widely used for **moving raw data files** from one place to another.

---

### **Key Points** 🔑

| Icon | Feature                 | Description                                                                                                   |
| ---- | ----------------------- | ------------------------------------------------------------------------------------------------------------- |
| 🌐   | **Protocol**            | Uses the File Transfer Protocol (FTP), FTPS (secure FTP), or SFTP (SSH File Transfer Protocol).               |
| 📂   | **Data Formats**        | Can store CSV, JSON, XML, Parquet, Excel, logs, etc.                                                          |
| 🔑   | **Authentication**      | Requires a username/password, or sometimes key-based authentication (SFTP).                                   |
| ⏳    | **Batch Data Movement** | Common for periodic (e.g., daily) data dumps.                                                                 |
| 🔄   | **Integration**         | Data pipelines fetch files from FTP servers and load them into data warehouses, lakes, or processing systems. |

---

### **How it Fits in Data Engineering Pipelines** ⚙️

```
📊 Data Producer (ERP, CRM, Sensors, etc.)
      ⬇ (exports data)
🌐 FTP Server
      ⬇ (fetch with pipeline)
🏭 ETL/ELT Process
      ⬇
📦 Data Warehouse / Data Lake
```

Example:

* A bank uploads daily transaction logs to an **SFTP server**.
* A data engineering job (Airflow, Azure Data Factory, AWS Glue, etc.) connects to the server every night, downloads the files, and loads them into a data lake for processing.

---

#  Connect an **FTP server** to a **Cloudera cluster**

If you want to connect an **FTP server** to a **Cloudera cluster** so data can flow in for processing.

---

## **1. Understand the Context** 📍

* **FTP Server** → Holds your raw files (CSV, JSON, XML, etc.).
* **Cloudera Cluster** → Likely running **HDFS** (Hadoop Distributed File System) and Spark/Hive/Impala for processing.
* **Goal** → Transfer files from FTP to **HDFS** (or directly to Hive tables).

---

## **2. Common Connection Methods**

| Method                          | When to Use                              | Tools                                       |
| ------------------------------- | ---------------------------------------- | ------------------------------------------- |
| **Command-line (Linux)**        | Simple, ad-hoc transfers                 | `ftp`, `sftp`, `curl`, `wget`               |
| **Automated with Sqoop/DistCp** | Large batch files or scheduled ingestion | `distcp` (HDFS copy)                        |
| **Workflow Orchestration**      | Part of ETL jobs                         | Apache NiFi, Apache Airflow                 |
| **Direct in Spark**             | Small/mid files for immediate processing | Spark + FTP libraries (e.g., `commons-net`) |

---

## **3. Step-by-Step Connection Example (SFTP → HDFS)**

### **Prerequisites**

* Cloudera cluster nodes must have **internet or VPN access** to the FTP server.
* FTP credentials or SSH keys for SFTP.

---

### **Option 1 – Using `sftp` + `hdfs dfs -put`**

```bash
# Step 1: Connect and download from FTP/SFTP
sftp user@ftp.server.com
sftp> cd /path/to/files
sftp> get mydata.csv
sftp> bye

# Step 2: Put into HDFS
hdfs dfs -put mydata.csv /user/cloudera/ftp_data/
```

---

### **Option 2 – One-liner with `curl` or `wget`**

```bash
curl -u user:password ftp://ftp.server.com/path/to/mydata.csv -o mydata.csv
hdfs dfs -put mydata.csv /user/cloudera/ftp_data/
```

---

### **Option 3 – Apache NiFi (Recommended for production)**

**Why NiFi?** 🌀 It’s bundled in some Cloudera distributions and is perfect for automating FTP ingestion.

**NiFi Steps:**

1. Open NiFi UI (`http://<nifi-host>:8080`).
2. Add **GetSFTP** or **GetFTP** processor.
3. Configure:

   * Hostname, Port, Username, Password/Private Key.
   * Remote Path (directory on FTP server).
4. Connect output to **PutHDFS** processor.
5. Start the flow → files will automatically move from FTP to HDFS.

---

### **Option 4 – Apache Airflow**

* Use the `FTPHook` (or `SFTPHook`) in an Airflow DAG.
* Download files → use `BashOperator` to put into HDFS.

---

## **4. Visual Flow** 🖼

```
📂 FTP/SFTP Server
       |
       v
   (NiFi GetSFTP)
       |
       v
  HDFS in Cloudera
       |
       v
Hive / Spark Processing
```

---

## **5. Best Practices** 🛠

* Use **SFTP (secure)** instead of FTP (plain text).
* Automate with NiFi or Airflow instead of manual scripts for repeat jobs.
* Set up **Kerberos authentication** in Cloudera if HDFS is secure.
* Monitor transfer jobs to avoid partial/incomplete loads.

---
