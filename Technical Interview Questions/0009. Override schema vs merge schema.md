In Delta Lake (and similar systems), **`override schema`** and **`merge schema`** are two concepts used when dealing with **schema changes** during writes or data ingestion.

---

## üîÅ **1. Merge Schema** (`mergeSchema`)

### üìò Definition:

**Merges the new schema with the existing schema** by **adding new columns**, if they don‚Äôt already exist.

> ‚úÖ Allows schema evolution **non-destructively**.

### üìå Example:

Suppose the existing Delta table has:

```sql
(name STRING, age INT)
```

Now you're writing a new DataFrame:

```sql
(name STRING, age INT, city STRING)
```

Using:

```python
df.write.format("delta").option("mergeSchema", "true").mode("append").save("path")
```

üìå The table schema becomes:

```sql
(name STRING, age INT, city STRING)
```

### ‚úÖ Use Case:

* Adding **new columns** to a Delta table.
* When the data schema is **evolving over time**.

---

## üß® **2. Override Schema** (`overwriteSchema`)

### üìò Definition:

**Replaces the existing schema with the new one entirely** when doing an overwrite.

> ‚ö†Ô∏è It‚Äôs **destructive** ‚Äî can remove columns that were previously in the table but not in the new data.

### üìå Example:

Existing table:

```sql
(name STRING, age INT)
```

New DataFrame:

```sql
(name STRING, salary DOUBLE)
```

```python
df.write.format("delta").option("overwriteSchema", "true").mode("overwrite").save("path")
```

üìå Resulting table schema:

```sql
(name STRING, salary DOUBLE)
```

### ‚ö†Ô∏è Caution:

* Removes **columns** not in the new DataFrame.
* Use with care especially in production.

---

## üîÑ Key Differences

| Feature     | `mergeSchema`                       | `overwriteSchema`                      |
| ----------- | ----------------------------------- | -------------------------------------- |
| Action      | Adds new columns to existing schema | Replaces the entire schema             |
| Destructive | ‚ùå No                                | ‚úÖ Yes (can drop columns)               |
| Write Mode  | Usually used with `append`          | Used with `overwrite`                  |
| Use Case    | Schema evolution (new fields)       | Schema replacement (planned overwrite) |

---

### ‚úÖ Best Practice Summary:

* Use **`mergeSchema=true`** when the schema evolves slowly (e.g., adding columns).
* Use **`overwriteSchema=true`** only when you intentionally want to **reset the schema**.
