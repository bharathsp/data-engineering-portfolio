### 🌬️ What are **Airflow DAGs**?

In **Apache Airflow**, a **DAG** (Directed Acyclic Graph) is a **Python script** that defines the **workflow** of a data pipeline — the tasks to run, their **order**, **dependencies**, and **schedule**.

---

## 🔁 DAG = **Workflow + Schedule + Dependencies**

* **Directed** → Each task has a direction (runs after something).
* **Acyclic** → No loops (a task can't depend on itself).
* **Graph** → Nodes (tasks) connected via edges (dependencies).

---

## 🔧 Basic DAG Example

```python
from airflow import DAG
from airflow.operators.bash import BashOperator
from datetime import datetime

with DAG(
    dag_id="my_first_dag",
    start_date=datetime(2024, 1, 1),
    schedule_interval="@daily",   # Can be CRON or presets like @hourly
    catchup=False,
) as dag:

    task1 = BashOperator(
        task_id="print_date",
        bash_command="date"
    )

    task2 = BashOperator(
        task_id="print_hello",
        bash_command="echo 'Hello, Airflow!'"
    )

    task1 >> task2  # Set dependency: task1 → task2
```

---

## 🧱 Key Components of a DAG

| Component           | Description                                        |
| ------------------- | -------------------------------------------------- |
| `dag_id`            | Unique name for the DAG                            |
| `start_date`        | When scheduling starts                             |
| `schedule_interval` | How often the DAG runs (e.g., daily, hourly)       |
| `catchup`           | Whether to run missed schedules if DAG was offline |
| `tasks`             | Units of work (e.g., Python, Bash, SQL)            |
| `dependencies`      | Define execution order                             |

---

## 🔌 Common Airflow Operators

| Operator                                        | Purpose                |
| ----------------------------------------------- | ---------------------- |
| `PythonOperator`                                | Runs Python functions  |
| `BashOperator`                                  | Executes Bash commands |
| `EmailOperator`                                 | Sends emails           |
| `DummyOperator`                                 | Placeholder/dummy node |
| `BranchPythonOperator`                          | Conditional branching  |
| `PostgresOperator`, `MySqlOperator`             | Run SQL on DBs         |
| `S3ToRedshiftOperator`, `GCSToBigQueryOperator` | Data movement          |

---

## 🧠 DAG Scheduling Options

| Interval     | Description         |
| ------------ | ------------------- |
| `@daily`     | Once per day        |
| `@hourly`    | Every hour          |
| `0 12 * * *` | Custom CRON         |
| `None`       | Manual trigger only |

---

## 🚨 DAG Lifecycle

1. DAG file is placed in `~/airflow/dags/`
2. Airflow parses the DAG
3. Scheduler queues up DAG runs based on schedule
4. Workers execute tasks
5. Metadata and logs are stored in the **Airflow metadata DB**

---

## ✅ Best Practices

* Use **modular functions** for reusability
* Set **task retries**, `email_on_failure`, `timeout` to handle failures
* Use **XComs** for passing small data between tasks
* Use `dag.catchup=False` unless you're handling historical data loads
* Monitor with **Airflow UI** or **CLI**

---

## 📌 Summary

> An **Airflow DAG** is a **Python-defined workflow** that specifies **what tasks to run**, **when to run them**, and **how they depend on each other**. Airflow then schedules and executes them reliably.

---
